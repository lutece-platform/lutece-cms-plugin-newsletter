<@pageContainer>
    <@pageColumn>
		<@pageHeader title='#i18n{newsletter.create_newsletter.boxTitle}' />
		<@tform method='post' name='create_newsletter' id='create_newsletter' action='jsp/admin/plugins/newsletter/DoCreateNewsLetter.jsp' boxed=true>
			<@input type='hidden' value='TRUE' name='newsletter_unsubscribe' />
			<@row>
				<@columns sm=12 md=3>
					<@formGroup labelFor='newsletter_name' labelKey='#i18n{newsletter.create_newsletter.label}' mandatory=true rows=2>
						<@input type='text' id='newsletter_name' name='newsletter_name' maxlength=50 />
					</@formGroup>
					<@formGroup labelFor='newsletter_description' labelKey='#i18n{newsletter.create_newsletter.description}' mandatory=true rows=2>
						<@input type='textarea' id='newsletter_description' name='newsletter_description' rows=2  />
					</@formGroup>
				</@columns>
				<@columns sm=12 md=3>
					<@formGroup labelFor='date_first_send' labelKey='#i18n{newsletter.create_newsletter.initialDate}' mandatory=true rows=2>
						<@inputGroup>
							<@inputGroupItem type='text'>
								<@icon style='calendar' />
							</@inputGroupItem>
							<@input type='date' name='date_first_send' id='date_first_send' format='j/m/Y' maxlength=10 value='${newsletter_last_sent}' />
						</@inputGroup>
					</@formGroup>
					<@formGroup labelFor='newsletter_workgroup' labelKey='#i18n{newsletter.create_newsletter.labelWorkgroup}' mandatory=true  rows=2>
						<@select name='newsletter_workgroup' default_value='' items=workgroup_list />
					</@formGroup>
				</@columns>
				<@columns sm=12 md=3>
					<@formGroup labelFor='newsletter_sender_name' labelKey='#i18n{newsletter.create_newsletter.labelSenderName}' mandatory=true rows=2>
						<@input type='text' id='newsletter_sender_name' name='newsletter_sender_name' maxlength=255 />
					</@formGroup>
					<@formGroup labelFor='newsletter_sender_mail' labelKey='#i18n{newsletter.create_newsletter.labelSenderMail}' mandatory=true rows=2>
						<@input type='text' id='newsletter_sender_mail' name='newsletter_sender_mail' maxlength=255 />
					</@formGroup>
				</@columns>
				<@columns sm=12 md=3>
					<@formGroup labelFor='newsletter_test_subject' labelKey='#i18n{newsletter.modify_newsletter.labelSubject}' rows=2>
						<@input type='text' id='newsletter_test_subject' name='newsletter_test_subject' maxlength=255 value='' />
					</@formGroup>
					<@formGroup labelFor='newsletter_test_recipients' labelKey='#i18n{newsletter.create_newsletter.labelTestRecipients}' helpKey='#i18n{newsletter.modify_newsletter.noticeDelimiter}' mandatory=true rows=2>
						<@input type='text' id='newsletter_test_recipients' name='newsletter_test_recipients' maxlength=255 />
					</@formGroup>
				</@columns>
			</@row>
			<@formGroup>
				<@button type='submit' buttonIcon='check' title='#i18n{newsletter.create_newsletter.buttonValidate}' />
				<@aButton href='jsp/admin/plugins/newsletter/ManageNewsLetter.jsp' buttonIcon='times' title='#i18n{newsletter.create_newsletter.buttonCancel}' color='default' />
			</@formGroup>
		</@tform>
	</@pageColumn>
</@pageContainer>
<#include "/admin/util/editor/editor.html" />
<@initEditor />
<script>
document.addEventListener("DOMContentLoaded", function() {
	const testers = document.getElementById('newsletter_test_recipients')
	testers.addEventListener( "blur", (event) => {
		testers.value=testers.value.replace( /\s/g, '')
	});
});
</script>